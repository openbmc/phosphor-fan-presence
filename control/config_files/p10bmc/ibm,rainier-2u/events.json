[
   {
     // Hold fans at the given target when a number of fans are missing.
     "name": "fan(s) missing",
     "groups": [
       {
         "name": "fan inventory",
         "interface": "xyz.openbmc_project.Inventory.Item",
         "property": { "name": "Present" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "count_state_before_target",
         "count": 1,
         "state": false,
         "target": 18000
       }
     ]
   },
   {
     // Hold fans at the given target when a number of rotors are nonfunctional.
     "name": "fan rotor(s) faulted",
     "groups": [
       {
         "name": "fan0 rotor inventory",
         "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
         "property": { "name": "Functional" }
       },
       {
         "name": "fan1 rotor inventory",
         "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
         "property": { "name": "Functional" }
       },
       {
         "name": "fan2 rotor inventory",
         "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
         "property": { "name": "Functional" }
       },
       {
         "name": "fan3 rotor inventory",
         "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
         "property": { "name": "Functional" }
       },
       {
         "name": "fan4 rotor inventory",
         "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
         "property": { "name": "Functional" }
       },
       {
         "name": "fan5 rotor inventory",
         "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
         "property": { "name": "Functional" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "count_state_before_target",
         "count": 1,
         "state": false,
         "target": 18000
       }
     ]
   },
   {
     // Hold fans at the given target when any critical service
     // is not running for 5 seconds.
     "name": "service(s) missing",
     "groups": [
       {
         "name": "fan inventory",
         "interface": "xyz.openbmc_project.Inventory.Item",
         "property": { "name": "Present" }
       },
       {
         "name": "occ objects",
         "interface": "org.open_power.OCC.Status",
         "property": { "name": "OccActive" }
       },
       {
         "name": "nvme temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "planar temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "flett temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "pcie cable card temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "ambient temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "altitude",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "name_has_owner"
       },
       {
         "class": "signal",
         "signal": "name_owner_changed"
       }
     ],
     "actions": [
       {
         "name": "call_actions_based_on_timer",
         "timer": {
           "interval": 5000000,
           "type": "oneshot"
         },
         "actions": [
           {
             "name": "set_target_on_missing_owner",
             "groups": [
               {
                 "name": "fan inventory",
                 "interface": "xyz.openbmc_project.Inventory.Item",
                 "property": { "name": "Present" }
               },
               {
                 "name": "occ objects",
                 "interface": "org.open_power.OCC.Status",
                 "property": { "name": "OccActive" }
               },
               {
                 "name": "nvme temps",
                 "interface": "xyz.openbmc_project.Sensor.Value",
                 "property": { "name": "Value" }
               },
               {
                 "name": "planar temps",
                 "interface": "xyz.openbmc_project.Sensor.Value",
                 "property": { "name": "Value" }
               },
               {
                 "name": "flett temps",
                 "interface": "xyz.openbmc_project.Sensor.Value",
                 "property": { "name": "Value" }
               },
               {
                 "name": "pcie cable card temps",
                 "interface": "xyz.openbmc_project.Sensor.Value",
                 "property": { "name": "Value" }
               },
               {
                 "name": "ambient temp",
                 "interface": "xyz.openbmc_project.Sensor.Value",
                 "property": { "name": "Value" }
               }
             ],
             "target": 18000
           }
         ]
       }
     ]
   },
   {
    // Set a fan floor if an OCC isn't active
    "name": "Non-active OCCs",
    "groups": [
      {
        "name": "occ objects",
        "interface": "org.open_power.OCC.Status",
        "property": {
          "name": "OccActive"
        }
      }
    ],
    "triggers": [
      {
        "class": "signal",
        "signal": "properties_changed"
      },
      {
        "class": "signal",
        "signal": "interfaces_added"
      },
      {
        "class": "init",
        "method": "get_properties"
      }
    ],
    "actions": [
      {
        "name": "count_state_floor",
        "count": 1,
        "state": false,
        "floor": 18000
      }
    ]
  },
  {
    // Set a raised fan floor when any temperature or altitude sensor is
    // nonfunctional
    "name": "Nonfunctional temperature sensors",
    "groups": [
      {
        "name": "proc0 core temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc1 core temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc2 core temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc3 core temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc0 ioring temp",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc1 ioring temp",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc2 ioring temp",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "proc3 ioring temp",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "dram temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "pmic temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "internal memory buffer temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "dram and external memory buffer temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "external memory buffer temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "vdd vrm temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "nvme temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "planar temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "flett temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "pcie cable card temps",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "ambient temp",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      },
      {
        "name": "altitude",
        "interface": "xyz.openbmc_project.State.Decorator.OperationalStatus",
        "property": { "name": "Functional" }
      }
    ],
    "triggers": [
      {
        "class": "signal",
        "signal": "properties_changed"
      },
      {
        "class": "signal",
        "signal": "interfaces_added"
      },
      {
        "class": "init",
        "method": "get_properties"
      }
    ],
    "actions": [
      {
        "name": "count_state_floor",
        "count": 1,
        "state": false,
        "floor": 18000
      }
    ]
  },
  {
     "name": "Set Proc 0 Core DVFS parameter",
     "groups": [
       {
         "name": "proc 0 core dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_0_core_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_0_core_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 1 Core DVFS parameter",
     "groups": [
       {
         "name": "proc 1 core dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_1_core_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_1_core_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 2 Core DVFS parameter",
     "groups": [
       {
         "name": "proc 2 core dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_2_core_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_2_core_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 3 Core DVFS parameter",
     "groups": [
       {
         "name": "proc 3 core dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_3_core_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_3_core_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 0 IO Ring DVFS parameter",
     "groups": [
       {
         "name": "proc 0 ioring dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_0_ioring_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_0_ioring_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 1 IO Ring DVFS parameter",
     "groups": [
       {
         "name": "proc 1 ioring dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_1_ioring_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_1_ioring_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 2 IO Ring DVFS parameter",
     "groups": [
       {
         "name": "proc 2 ioring dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_2_ioring_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_2_ioring_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     "name": "Set Proc 3 IO Ring DVFS parameter",
     "groups": [
       {
         "name": "proc 3 ioring dvfs temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_3_ioring_dvfs_increase_temp",
         "modifier": {
             "operator": "minus",
             "value": 10
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "proc_3_ioring_dvfs_decrease_temp",
         "modifier": {
             "operator": "minus",
             "value": 13
         }
       }
     ]
   },
   {
     // Collect group temperatures each iteration the repeating timer expires
     "name": "Fan control timer loop",
     "groups": [
       {
         "name": "proc0 core temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc1 core temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc2 core temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc3 core temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc0 ioring temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc1 ioring temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc2 ioring temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "proc3 ioring temp",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "dram temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "pmic temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "internal memory buffer temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "dram and external memory buffer temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "external memory buffer temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "vdd vrm temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "nvme temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "planar temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "flett temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       },
       {
         "name": "pcie cable card temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "timer",
         "type": "repeating",
         "interval": 2000000,
         "preload_groups": true
       }
     ],
     "actions": [
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc0 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_0_core_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc1 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_1_core_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc2 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_2_core_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc3 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_3_core_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc0 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_0_ioring_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc1 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_1_ioring_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc2 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_2_ioring_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "proc3 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_3_ioring_dvfs_increase_temp",
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "dram temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 69.0,
         "delta": 100
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "pmic temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 69.0,
         "delta": 100
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "internal memory buffer temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 74.0,
         "delta": 100
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "dram and external memory buffer temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 55.0,
         "delta": 200
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "external memory buffer temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 55.0,
         "delta": 200
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "vdd vrm temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 82.0,
         "delta": 300
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "nvme temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 58.0,
         "delta": 200
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "planar temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 65.0,
         "delta": 255
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "flett temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 80.0,
         "delta": 200
       },
       {
         "name": "set_net_increase_target",
         "groups": [
           {
             "name": "pcie cable card temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 70.0,
         "delta": 255
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc0 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_0_core_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc1 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_1_core_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc2 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_2_core_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc3 core temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_3_core_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc0 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_0_ioring_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc1 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_1_ioring_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc2 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_2_ioring_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "proc3 ioring temp",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state_parameter_name": "proc_3_ioring_dvfs_decrease_temp",
         "delta": 50
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "dram temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 66.0,
         "delta": 40
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "pmic temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 66.0,
         "delta": 40
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "internal memory buffer temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 71.0,
         "delta": 40
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "dram and external memory buffer temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 52.0,
         "delta": 40
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "external memory buffer temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 52.0,
         "delta": 40
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "vdd vrm temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 79.0,
         "delta": 30
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "nvme temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 55.0,
         "delta": 40
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "planar temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 60.0,
         "delta": 80
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "flett temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 75.0,
         "delta": 80
       },
       {
         "name": "set_net_decrease_target",
         "groups": [
           {
             "name": "pcie cable card temps",
             "interface": "xyz.openbmc_project.Sensor.Value",
             "property": { "name": "Value" }
           }
         ],
         "state": 65.0,
         "delta": 80
       }
     ]
   },
   {
     // Remove NVMe temperature objects from cache when they are removed from
     // dbus. There's no need to react to their removal.
     "name": "remove nvme objects",
     "groups": [
       {
         "name": "nvme temps",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "signal",
         "signal": "interfaces_removed"
       }
     ]
   },
   {
     "name": "set pcie floor index",
     "groups": [
       {
         "name": "pcie slots",
         "interface": "xyz.openbmc_project.State.Decorator.PowerState",
         "property": {
           "name": "PowerState"
         }
       },
       {
         "name": "pcie cards",
         "interface": "xyz.openbmc_project.Inventory.Item.PCIeDevice",
         "property": {
           "name": "Function0DeviceId"
         }
       },
       {
         "name": "pcie cards",
         "interface": "xyz.openbmc_project.Inventory.Item.PCIeDevice",
         "property": {
           "name": "Function0VendorId"
         }
       },
       {
         "name": "pcie cards",
         "interface": "xyz.openbmc_project.Inventory.Item.PCIeDevice",
         "property": {
           "name": "Function0SubsystemId"
         }
       },
       {
         "name": "pcie cards",
         "interface": "xyz.openbmc_project.Inventory.Item.PCIeDevice",
         "property": {
           "name": "Function0SubsystemVendorId"
         }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       }
     ],
     "actions": [
       {
         "name": "pcie_card_floors",
         "use_config_specific_files": true,
         "settle_time": 2
       }
     ]
   },
   {
     "name": "Set altitude offset parameter",
     "groups": [
       {
         "name": "altitude",
         "interface": "xyz.openbmc_project.Sensor.Value",
         "property": { "name": "Value" }
       }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         // Refresh altitude every 24hrs
         "class": "timer",
         "type": "repeating",
         "interval": 86400000000,
         "preload_groups": true
       }
     ],
     "actions": [
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "ambient_20_altitude_offset",
         "modifier": {
           "operator": "less_than",
           "value": [
             { "arg_value": 500, "parameter_value": 0 },
             { "arg_value": 1000, "parameter_value": 800 },
             { "arg_value": 1500, "parameter_value": 1600 },
             { "arg_value": 2000, "parameter_value": 2400 },
             { "arg_value": 2500, "parameter_value": 3200 },
             { "arg_value": 3000, "parameter_value": 4000 }
           ]
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "ambient_25_altitude_offset",
         "modifier": {
           "operator": "less_than",
           "value": [
             { "arg_value": 500, "parameter_value": 0 },
             { "arg_value": 1000, "parameter_value": 900 },
             { "arg_value": 1500, "parameter_value": 1800 },
             { "arg_value": 2000, "parameter_value": 2700 },
             { "arg_value": 2500, "parameter_value": 3600 },
             { "arg_value": 3000, "parameter_value": 4400 }
           ]
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "ambient_30_altitude_offset",
         "modifier": {
           "operator": "less_than",
           "value": [
             { "arg_value": 500, "parameter_value": 0 },
             { "arg_value": 1000, "parameter_value": 800 },
             { "arg_value": 1500, "parameter_value": 1600 },
             { "arg_value": 2000, "parameter_value": 2400 },
             { "arg_value": 2500, "parameter_value": 3200 },
             { "arg_value": 3000, "parameter_value": 4000 }
           ]
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "ambient_35_altitude_offset",
         "modifier": {
           "operator": "less_than",
           "value": [
             { "arg_value": 500, "parameter_value": 0 },
             { "arg_value": 1000, "parameter_value": 900 },
             { "arg_value": 1500, "parameter_value": 1800 },
             { "arg_value": 2000, "parameter_value": 2700 },
             { "arg_value": 2500, "parameter_value": 3600 },
             { "arg_value": 3000, "parameter_value": 4400 }
           ]
         }
       },
       {
         "name": "set_parameter_from_group_max",
         "parameter_name": "ambient_40_altitude_offset",
         "modifier": {
           "operator": "less_than",
           "value": [
             { "arg_value": 500, "parameter_value": 0 },
             { "arg_value": 1000, "parameter_value": 900 },
             { "arg_value": 1500, "parameter_value": 1800 },
             { "arg_value": 2000, "parameter_value": 2700 },
             { "arg_value": 2500, "parameter_value": 3600 },
             { "arg_value": 3000, "parameter_value": 4400 }
           ]
         }
       }
     ]
   },
   {
     "name": "Fan floors",
     "groups": [
      {
        "name": "ambient temp",
        "interface": "xyz.openbmc_project.Sensor.Value",
        "property": { "name": "Value" }
      }
     ],
     "triggers": [
       {
         "class": "init",
         "method": "get_properties"
       },
       {
         "class": "signal",
         "signal": "properties_changed"
       },
       {
         "class": "signal",
         "signal": "interfaces_added"
       },
       {
         "class": "parameter",
         "parameter": "pcie_floor_index"
       },
       {
         "class": "parameter",
         "parameter": "ambient_20_altitude_offset"
       },
       {
         "class": "parameter",
         "parameter": "ambient_25_altitude_offset"
       },
       {
         "class": "parameter",
         "parameter": "ambient_30_altitude_offset"
       },
       {
         "class": "parameter",
         "parameter": "ambient_35_altitude_offset"
       },
       {
         "class": "parameter",
         "parameter": "ambient_40_altitude_offset"
       }
     ],
     "actions": [
       {
         "name": "mapped_floor",
         "key_group": "ambient temp",
         "fan_floors": [
          {
            // Entry valid for temps < 20
            "key": 20,
            "default_floor": 6200,
            "floor_offset_parameter": "ambient_20_altitude_offset",
            "floors": [
              {
                "parameter": "pcie_floor_index",
                "floors": [
                  { "value": 1, "floor": 6700 },
                  { "value": 2, "floor": 8000 },
                  { "value": 3, "floor": 9300 },
                  { "value": 4, "floor": 9800 },
                  { "value": 5, "floor": 11300 }
                ]
              }
            ]
          },
          {
            // Entry valid for temps < 25
            "key": 25,
            "default_floor": 7500,
            "floor_offset_parameter": "ambient_25_altitude_offset",
            "floors": [
              {
                "parameter": "pcie_floor_index",
                "floors": [
                  { "value": 1, "floor": 8400 },
                  { "value": 2, "floor": 9500 },
                  { "value": 3, "floor": 10600 },
                  { "value": 4, "floor": 13500 },
                  { "value": 5, "floor": 14900 }
                ]
              }
            ]
          },
          {
            // Entry valid for temps < 30
            "key": 30,
            "default_floor": 10000,
            "floor_offset_parameter": "ambient_30_altitude_offset",
            "floors": [
              {
                "parameter": "pcie_floor_index",
                "floors": [
                  { "value": 1, "floor": 10800 },
                  { "value": 2, "floor": 11400 },
                  { "value": 3, "floor": 12000 },
                  { "value": 4, "floor": 17300 },
                  { "value": 5, "floor": 18000 }
                ]
              }
            ]
          },
          {
            // Entry valid for temps < 35
            "key": 35,
            "default_floor": 12500,
            "floor_offset_parameter": "ambient_35_altitude_offset",
            "floors": [
              {
                "parameter": "pcie_floor_index",
                "floors": [
                  { "value": 1, "floor": 13200 },
                  { "value": 2, "floor": 13400 },
                  { "value": 3, "floor": 13600 },
                  { "value": 4, "floor": 18000 },
                  { "value": 5, "floor": 18000 }
                ]
              }
            ]
          },
          {
            // Entry valid for temps < 40
            "key": 40,
            "default_floor": 15000,
            "floor_offset_parameter": "ambient_40_altitude_offset",
            "floors": [
              {
                "parameter": "pcie_floor_index",
                "floors": [
                  { "value": 1, "floor": 18000 },
                  { "value": 2, "floor": 18000 },
                  { "value": 3, "floor": 18000 },
                  { "value": 4, "floor": 18000 },
                  { "value": 5, "floor": 18000 }
                ]
              }
            ]
          }
        ]
       }
     ]
   }
]
